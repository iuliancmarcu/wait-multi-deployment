name: 'Wait Vercel Mono Deployment'
description: 'GitHub Action that waits on multiple deployments of a PR and outputs their URLs as env variables'
branding:
    icon: 'clock'
    color: 'green'
inputs:
    actor_name:
        description: 'The name of the actor that will be used when checking for a new deployment'
        default: 'vercel[bot]'
        required: false
    github_token:
        description: 'The Github Secret'
        required: true
    vercel_password:
        description: 'Vercel password protection secret'
        required: false
    environment:
        description: 'The name of the environment that was deployed to (e.g., "Preview" or "Production")'
        required: false
    max_timeout:
        description: 'The timeout in seconds to be used when running each action step'
        default: '600'
        required: false
    allow_inactive_deployment:
        description: 'Use the most recent inactive deployment (previously deployed preview) associated with the pull request if no new deployment is available.'
        required: false
    use_latest_deployment:
        description: 'Use the most recent deployment associated with the application, regardless of the PR'
        required: false
    path:
        description: 'The path to check. Defaults to the index of the domain'
        default: '/'
        required: false
    check_interval:
        description: 'How often in seconds should we make retry HTTP requests checking the deployment?'
        default: '2'
        required: false
    applications:
        description: 'Comma-separated list of application names to check for deployments. These application names should match the Vercel project name and GitHub Deplotments (eg. `my-app,my-app-staging`)'
        required: false
    applications_paths:
        description: 'Comma-separated list of `application_name:path` pairs to be used when checking the deployments status'
        required: false
    application_prefix:
        description: 'Prefix to be used when checking for deployments. This is useful when the Vercel project name is different from the Nx application name'
        required: false
runs:
    using: 'node20'
    main: 'dist/index.js'
